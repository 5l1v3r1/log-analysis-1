## THIS IS A CENTRALLY MANAGED FILE! ##
##    CHANGES WILL BE OVERWRITTEN    ##

module(load="imuxsock") # provides support for local system logging
module(load="imklog")   # provides kernel logging support
module(load="omrelp")

*.* action(type="omrelp" target="{{rsyslog_ip}}"
port="10514" tls="on"
tls.caCert="/etc/ssl/localCA.pem"
tls.myCert="/etc/ssl/clientname.crt"
tls.myPrivKey="/etc/ssl/clientname.key"
tls.authmode="name"
tls.permittedpeer=["logserver.local","{{rsyslog_ip}}"]
)

#*.* @@{{rsyslog_ip}}:{{rsyslog_port}}

$ActionFileDefaultTemplate RSYSLOG_TraditionalFileFormat

$RepeatedMsgReduction on

$FileOwner syslog
$FileGroup adm
$FileCreateMode 0640
$DirCreateMode 0755
$Umask 0022
$PrivDropToUser syslog
$PrivDropToGroup syslog

$WorkDirectory /var/spool/rsyslog
